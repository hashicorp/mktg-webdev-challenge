---
layout: mdx
---

import Link from 'next/link'

## HashiCorp Marketing Webdev Challenge

The task is to build a "people directory" page. This page should allow visitor to search by name for a person. If this were a real page, we'd want to search all 317 person records in our CMS, but for the purposes of this excercise, limit your results to 100. This is the maximum number of results that our CMS API will return in a single page.

Use [this Figma file](https://www.figma.com/file/xGicP4qkXbMhte4LAYxC4X/Untitled?node-id=0%3A1) as your source of truth for design and behavior:

<iframe
  width="800"
  height="450"
  src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FxGicP4qkXbMhte4LAYxC4X%2FUntitled%3Fnode-id%3D0%253A1"
  allowFullScreen
></iframe>

Treat this the same way you would if you started working with us and this was your first day -- that is, feel free to ask as many questions as you want. We will set up a slack channel for you to ask questions and interact with us. This is quite similar to the type of task we would assign a new hire on their first day, in fact.

We expect this to be done within a day or two's worth of full-time work - about 8 - 14 hours. But obviously you have other committments and so we generally look at about week for candidates to complete the challenge. If you're approaching 14 hours (of total time spent), just stop where you are and we'll complete the evaluation.

### Fetching Data

This project uses [Next.js](https://nextjs.org), a react-based framework that can generate static or dynamic websites. We have a tool called `nextjs-scripts` layered into the config that provides several utilities, especially helpful for loading remote data.

The data for this project can be fetched from our CMS, [DatoCMS](https://www.datocms.com/), `nextjs-scripts` exports a function that allows you to easily fetch the data. An example might look something like this:

```js
import rivetQuery from '@hashicorp/nextjs-scripts/dato/client'
import someQuery from './query.graphql'

rivetQuery({ query: someQuery }).then(console.log)
```

Next.js [conventions](https://nextjs.org/learn/basics/fetching-data-for-pages), however, dictate that an async function called `getStaticProps` can be exported along with any component within the `pages` directory. This function will be executed before the component mounts, passing the returned object into the component as props. So, within this project, your initial data fetch might look something like this:

```js
import rivetQuery from '@hashicorp/nextjs-scripts/dato/client'
import someQuery from './query.graphql'

export default function somePage({ queryResult }) {
  return <p>{JSON.stringify(queryResult)}</p>
}

export async function getStaticProps() {
  const data = await rivetQuery({ query })
  return { props: queryResult }
}

export default somePage
```

You'll see a similar template provided in the `pages/people` folder, which is working out of the box.

Our CMS, [DatoCMS](https://www.datocms.com/), exposes a public GraphQL API to our data which [you can explore here using GraphiQL](https://cda-explorer.datocms.com/?apitoken=dc45ff8c8b27dd22a7c24aaaf8aa75&query=query%20%7B%0A%20%20allDepartments%28first%3A%20100%29%20%7B%0A%20%20%20%20name%0A%20%20%20%20parent%20%7B%0A%20%20%20%20%20%20id%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20allPeople%28first%3A%20100%29%20%7B%0A%20%20%20%20name%0A%20%20%20%20avatar%20%7B%0A%20%20%20%20%20%20url%0A%20%20%20%20%7D%0A%20%20%20%20department%20%7B%0A%20%20%20%20%20%20name%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D). We loaded up the same query as you have in the `people` folder by default. Use this interface to explore our schema and put together a query that fetches the data you need for the page.

### Building The Page

Once you have the data, the next step is to build out the page! We expect the markup to be clear and semantic, and the styling to be clear, well-structured, and good-looking (we use [CSS Modules](https://nextjs.org/docs/basic-features/built-in-css-support#adding-component-level-css)). Do your best to visually match the styling in the Figma design. Feel free to build out components as part of the page to reduce repetition and break out reasonable chunks of code. The `components` folder can be a home to them.

Matching person results should update in real-time while typing. Checking the "Hide people missing a profile image" should filter out results that don't have an image. Use the placeholder image from the Figma file for those without an image.

If no results match the search, show the "No results found" result.

In addition, you'll see that each `person` has a `department` - the designs show a nested sidebar of department names, which can be toggled open and closed to show the department tree. Selecting a department name shows an active state in the sidebar and filters the `people` results to only that department.

You may have also discovered that we have a library of components under the `@hashicorp` scope on npm. We do not want or expect you to use these components, and attempting to do so will only slow you down in this instance, as they are built for a different build system. You should build all the components you need for this page on your own, within this project.

All images on the page can be retrieved from the CMS via URLs from the graphql query. And we expect the page to be styled responsively so it looks great on both mobile and desktop.

<Link href="/people">
  <a>&raquo; Here's the page!</a>
</Link>

![excited bun](https://media.giphy.com/media/cMnt7i2RykmpW/giphy.gif)
